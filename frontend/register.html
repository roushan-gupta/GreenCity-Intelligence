<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Register - Pollution Management System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-5">
            <div class="card p-4 shadow">
                <h4 class="text-center mb-3">Register as Citizen</h4>

                <!-- Step 1: Request OTP -->
                <div id="step1">
                    <input type="email" id="email" class="form-control mb-3" placeholder="Email" required>
                    
                    <button class="btn btn-primary w-100" onclick="sendOTP()">
                        <span id="sendOtpText">Send OTP</span>
                        <span id="sendOtpSpinner" class="spinner-border spinner-border-sm d-none" role="status"></span>
                    </button>
                </div>

                <!-- Step 2: Verify OTP and Set Password -->
                <div id="step2" class="d-none">
                    <div class="alert alert-success">
                        OTP sent to <strong id="userEmail"></strong>
                    </div>

                    <input type="text" id="otp" class="form-control mb-2" placeholder="Enter 6-Digit OTP" maxlength="6" required>
                    <input type="text" id="name" class="form-control mb-2" placeholder="Full Name" required>
                    <input type="text" id="contact_number" class="form-control mb-2" placeholder="Contact Number" required>
                    <input type="text" id="address_house" class="form-control mb-2" placeholder="House/Flat No." required>
                    <input type="text" id="address_street" class="form-control mb-2" placeholder="Street/Area" required>
                    <input type="text" id="address_city" class="form-control mb-2" placeholder="District/City" required>
                    <input type="text" id="address_state" class="form-control mb-2" placeholder="State" required>
                    <input type="text" id="address_pincode" class="form-control mb-2" placeholder="Pincode" required>
                    <input type="password" id="password" class="form-control mb-2" placeholder="Password" required>
                    <input type="password" id="confirmPassword" class="form-control mb-3" placeholder="Confirm Password" required>

                    <button class="btn btn-success w-100 mb-2" onclick="registerWithOTP()">
                        <span id="registerText">Complete Registration</span>
                        <span id="registerSpinner" class="spinner-border spinner-border-sm d-none" role="status"></span>
                    </button>

                    <button class="btn btn-outline-secondary w-100" onclick="resendOTP()">Resend OTP</button>
                </div>

                <p id="message" class="mt-3 text-center"></p>

                <hr>
                <p class="text-center mb-0">
                    Already have an account? <a href="index.html">Login here</a>
                </p>
            </div>
        </div>
    </div>
</div>

<script src="js/register.js"></script>
</body>
</html>
